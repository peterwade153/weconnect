
language: python

python:
  - "3.4"


install:
  - pip install coverage
  - pip install coveralls
  - pip install pytest-cov
  - pip install -r requirements.txt


services:
  - postgresql

before_script:
  - psql -c "CREATE ROLE postgres PASSWORD 'admin' CREATEDB CREATEROLE INHERIT LOGIN;" -U postgres
  - psql -c "CREATE DATABASE testmyconnect;" -U postgres



script:
  - pytest api/v1/tests
  - pytest api/v2/tests
  - coverage report


after_success:
  - coverage report
  - coveralls
   #uploads reports to  coveralls.io
